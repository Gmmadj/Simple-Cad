var Widget = new function() {
    function a() {
        -1 < window.location.href.indexOf(".g310") && (y = "https://testcad2.simplecad.ru/"), -1 < window.location.href.indexOf(".loc") && (y = "https://cad.simplecad.loc/")
    }

    function b(a) {
        var b = "json_body=" + encodeURIComponent(JSON.stringify(a)),
            d = new XMLHttpRequest;
        d.open("POST", y + "ajax/", !0), d.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), d.onreadystatechange = function() {
            if (4 == this.readyState && 200 == this.status && "undefined" != typeof this.response) {
                var b = JSON.parse(this.response);
                "undefined" != typeof b.data && c(a, b)
            }
        }, d.send(b)
    }

    function c(a, b) {
        d(a, b)
    }

    function d(a, b) {
        switch (a.type) {
            case "widget_proektor":
                k(a, b);
                break;
            case "widget_nde":
                l(a, b);
                break;
            default:
        }
    }

    function e(a) {
        if (0 < a.files.length) {
            var b = document.createElement("link");
            b.setAttribute("href", a.files[0]), b.setAttribute("rel", "stylesheet"), a.files.shift(), b.onload = function() {
                0 < a.files.length ? e(a) : f(a)
            }, document.head.appendChild(b)
        }
    }

    function f(a) {
        if ("undefined" != typeof a.type) switch (a.type) {
            case "widget_proektor":
                q();
                break;
            case "widget_nde":
                r();
                break;
            default:
        }
    }

    function g(a) {
        if (0 < a.files.length) {
            var b = document.createElement("script");
            b.setAttribute("src", a.files[0]), b.setAttribute("type", "text/javascript"), a.files.shift(), b.onload = function() {
                0 < a.files.length ? g(a) : h(a)
            }, document.head.appendChild(b)
        }
    }

    function h(a) {
        if ("undefined" != typeof a.type) switch (a.type) {
            case "widget_proektor":
                s();
                break;
            case "widget_nde":
                t();
                break;
            default:
        }
    }

    function i(a) {
        var b2 = b({
            type: "widget_proektor",
            widget_data: a
        })
    }

    function j(a) {
        b({
            type: "widget_nde",
            widget_data: a
        })
    }

    function k(a, b) {
        m(a, b), o()
    }

    function l(a, b) {
        n(a, b), p()
    }

    function m(a, b) {
        z.data = a, z.response = b
    }

    function n(a, b) {
        A.data = a, A.response = b
    }

    function o() {
        e({
            files: z.response.data.css,
            type: "widget_proektor"
        })
    }

    function p() {
        e({
            files: A.response.data.css,
            type: "widget_nde"
        })
    }

    function q() {
        g({
            files: z.response.data.js,
            type: "widget_proektor"
        })
    }

    function r() {
        g({
            files: A.response.data.js,
            type: "widget_nde"
        })
    }

    function s() {
        var a = document.createElement("div");
        console.log(z)
        a.setAttribute("class", "rowcell"), a.innerHTML = z.response.data.html, document.body.appendChild(a), u()
    }

    function t() {
        var a = document.createElement("div");
        a.setAttribute("class", "rowcell"), a.innerHTML = A.response.data.html, document.body.appendChild(a), v()
    }

    function u() {
        w = setInterval(function() {
            var a = document.getElementById("r_d_root");
            null !== a && (clearInterval(w), window.InitProektor())
        }, 1e3)
    }

    function v() {
        x = setInterval(function() {
            var a = document.getElementById("r_d_root");
            null !== a && (clearInterval(x), window.InitNde())
        }, 1e3)
    }
    var w, x, y = "https://cad2.simplecad.ru/",
        z = {},
        A = {};
    this.Proektor = function(b) {
        i(b)
    }, this.Nde = function(b) {
        j(b)
    }
};